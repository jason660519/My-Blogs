# Jason Blog 新手開啟專案指南

## 📋 系統需求

在開始之前，請確保您的系統已安裝以下軟體：

### 必要軟體
- **Python 3.7+** (建議使用 Python 3.9 或更新版本)
- **現代瀏覽器** (Chrome、Firefox、Safari、Edge)

### 檢查 Python 安裝
開啟命令提示字元或 PowerShell，輸入以下命令：
```bash
python --version
# 或
py --version
```

如果顯示版本號（如 `Python 3.9.x`），表示 Python 已正確安裝。

## ⚠️ 重要提示 (Windows 用戶)

在 Windows 系統中使用 PowerShell 時，請注意：

1. **Python 命令**: 使用 `py` 而非 `python`
2. **網路測試限制**: PowerShell 的網路測試命令（`Test-NetConnection`、`Invoke-WebRequest`）可能無法正確連接到 localhost，這是正常現象
3. **以瀏覽器為準**: 判斷伺服器是否正常運行，請以瀏覽器訪問結果為準，而非 PowerShell 命令的輸出
4. **伺服器日誌**: 查看 PowerShell 視窗中的伺服器日誌，如果顯示 HTTP 200 狀態碼，表示伺服器工作正常

## 🚀 快速開始

### 步驟 1: 下載專案
1. 下載或複製專案到您的電腦
2. 解壓縮到任意資料夾（建議路徑不包含中文字元）

### 步驟 2: 開啟專案資料夾
1. 開啟檔案總管，導航到專案資料夾
2. 在資料夾空白處按住 `Shift` + 右鍵，選擇「在此處開啟 PowerShell 視窗」
   - 或者開啟 PowerShell/命令提示字元，使用 `cd` 命令導航到專案資料夾

### 步驟 3: 系統診斷（建議）
在啟動伺服器前，建議先執行診斷工具檢查系統狀態：
```bash
py 診斷工具.py
```

診斷工具會檢查：
- Python 版本和環境
- 必要檔案完整性
- 端口可用性
- 網路連線狀態
- 提供建議的啟動命令

### 步驟 4: 啟動伺服器
根據診斷工具的建議，或直接使用以下命令：
```bash
py server.py
```

### 步驟 5: 訪問網站
1. 等待看到「伺服器運行在 http://localhost:8000」的訊息
2. 開啟瀏覽器，訪問 `http://localhost:8000`

## 🌐 支援的 URL 格式

### 首頁訪問
- **根目錄**: `http://localhost:8000/` (自動偵測瀏覽器語言)
- **指定語言**:
  - 繁體中文: `http://localhost:8000/home/tw`
  - 英文: `http://localhost:8000/home/en`
  - 簡體中文: `http://localhost:8000/home/cn`
  - 日文: `http://localhost:8000/home/jp`

### 文章頁面
#### 新格式 (推薦)
```
/articles/[語言]/[分類]/[標題]/[ID]
```
範例: `http://localhost:8000/articles/tw/investment/fortune-god-beside-you/1`

#### 舊格式 (向下相容)
```
/[分類]/[標題]-[ID]-[語言]
```
範例: `http://localhost:8000/investment/fortune-god-beside-you-1-tw`

## 🛠️ 常見問題與解決方案

### Q1: 執行 `py server.py` 時出現「'py' 不是內部或外部命令」
**解決方案:**
1. 嘗試使用 `python server.py`
2. 如果仍然失敗，請重新安裝 Python 並確保勾選「Add Python to PATH」選項

### Q2: 伺服器啟動後，瀏覽器無法訪問 localhost:8000
**解決方案:**
1. 確認伺服器確實在運行（應該看到「伺服器運行在 http://localhost:8000」訊息）
2. **重要**: 在 Windows 系統中，PowerShell 的網路測試命令（如 `Test-NetConnection`、`Invoke-WebRequest`）可能會顯示連接失敗，但這不代表伺服器有問題
3. **直接使用瀏覽器測試**: 忽略 PowerShell 命令的錯誤，直接在瀏覽器中訪問 `http://localhost:8000`
4. 如果瀏覽器仍無法訪問：
   - 檢查防火牆設定，確保允許 Python 程式訪問網路
   - 嘗試使用 `127.0.0.1:8000` 代替 `localhost:8000`
5. **端口衝突解決**: 如果 8000 端口被佔用，使用其他端口：
   ```bash
   # 使用 8080 端口
   py -c "from server import run_server; run_server(8080)"
   
   # 或使用 3000 端口
   py -c "from server import run_server; run_server(3000)"
   ```
6. 重新啟動伺服器：按 `Ctrl+C` 停止，然後重新執行命令

### Q3: 網頁載入很慢或部分功能無法使用
**解決方案:**
1. 確保所有檔案都在正確位置（參考專案結構）
2. 檢查瀏覽器控制台是否有錯誤訊息（按 F12 開啟開發者工具）
3. 清除瀏覽器快取並重新整理頁面

### Q4: 看到 404 錯誤（favicon.ico 等檔案找不到）
**說明:** 這些是正常的警告訊息，不會影響網站功能。如果需要消除這些警告：
1. 可以添加對應的 favicon 檔案到專案根目錄
2. 或者在 HTML 中移除相關的 favicon 連結

### Q5: 網頁顯示空白或載入不完整
**解決方案:**
1. 檢查瀏覽器控制台錯誤（按 F12 → Console 標籤）
2. 確認所有必要檔案都存在：
   - `index.html`
   - `script.js`
   - `styles.css`
   - `article-manager.js`
   - `articles/articles-config.json`
3. 清除瀏覽器快取：`Ctrl+F5` 強制重新整理
4. 嘗試無痕模式瀏覽

### Q6: 修改程式碼後沒有效果
**解決方案:**
1. **前端檔案** (HTML/CSS/JS)：只需重新整理瀏覽器 (`F5` 或 `Ctrl+F5`)
2. **後端檔案** (server.py)：需要重新啟動伺服器
   - 按 `Ctrl+C` 停止伺服器
   - 重新執行 `py server.py` 或相應的端口命令
3. 確認檔案已儲存

### Q7: 如何檢查端口是否被佔用
**Windows 系統:**
```bash
# 檢查特定端口
netstat -ano | findstr :8000

# 檢查所有監聽端口
netstat -ano | findstr LISTENING
```

### Q8: Python 版本相容性問題
**解決方案:**
1. 確認 Python 版本：`py --version`
2. 建議使用 Python 3.7 或更新版本
3. 如果有多個 Python 版本，嘗試：
   ```bash
   python3 server.py
   # 或
   python3.9 server.py
   ```

### Q9: PowerShell 網路命令顯示錯誤但伺服器正常運行
**現象:** 
- 執行 `Test-NetConnection localhost -Port 8000` 顯示 `TcpTestSucceeded: False`
- 執行 `Invoke-WebRequest http://localhost:8000` 顯示連接超時
- 但伺服器日誌顯示正常運行且有請求進來

**解決方案:**
1. **這是正常現象**: Windows PowerShell 的網路命令在某些系統配置下可能無法正確連接到 localhost
2. **直接使用瀏覽器**: 忽略 PowerShell 命令的錯誤，直接在瀏覽器中測試
3. **伺服器日誌為準**: 如果伺服器日誌顯示有 HTTP 請求進來且返回 200 狀態碼，表示伺服器工作正常
4. **替代測試方法**: 如果需要命令行測試，可以嘗試：
   ```bash
   # 使用 curl（如果已安裝）
   curl -I http://localhost:8000
   
   # 或檢查端口監聽狀態
   netstat -ano | findstr :8000
   ```

### Q10: 瀏覽器顯示 "ERR_CONNECTION_REFUSED" 或 "refused to connect"
**解決方案:**
1. 確認伺服器確實在運行（檢查 PowerShell 視窗是否顯示伺服器訊息）
2. 檢查伺服器綁定地址：
   - 確保伺服器綁定到 `127.0.0.1` 而非其他地址
   - 查看伺服器啟動訊息中的綁定地址
3. 重新啟動伺服器：
   ```bash
   # 停止伺服器（Ctrl+C）
   # 重新啟動
   py server.py
   ```
4. 嘗試不同的訪問方式：
   - `http://localhost:8000`
   - `http://127.0.0.1:8000`
5. 檢查是否有其他程式佔用端口

## 📁 專案結構說明

```
Jason Blog/
├── index.html          # 主頁面
├── server.py           # Python 伺服器
├── script.js           # 主要 JavaScript 邏輯
├── styles.css          # 樣式表
├── article-manager.js  # 文章管理邏輯
├── url-redirect.js     # URL 重定向邏輯
├── sw.js              # Service Worker (離線支援)
├── articles/          # 文章資料夾
│   ├── articles-config.json
│   └── [分類資料夾]/
├── content/           # 多語言內容
│   ├── tw/           # 繁體中文
│   ├── en/           # 英文
│   ├── cn/           # 簡體中文
│   └── jp/           # 日文
└── [其他檔案...]
```

## 🔧 開發模式

### 修改內容後重新載入
1. 修改 HTML、CSS、JS 檔案後，只需重新整理瀏覽器即可
2. 修改 Python 檔案（server.py）後，需要重新啟動伺服器：
   - 按 `Ctrl+C` 停止伺服器
   - 重新執行 `py server.py`

### 添加新文章
1. 在 `articles/[分類]/` 資料夾中添加 Markdown 檔案
2. 在 `content/[語言]/` 資料夾中添加對應的多語言版本
3. 更新 `articles-config.json` 檔案

## 🚪 停止伺服器

在 PowerShell 視窗中按 `Ctrl+C` 即可停止伺服器。

## 📞 技術支援

如果遇到其他問題：
1. 檢查 PowerShell 視窗中的錯誤訊息
2. 查看瀏覽器開發者工具的控制台（F12）
3. 確保所有檔案完整且位置正確

---

**祝您使用愉快！** 🎉

> 💡 **提示**: 建議將此指南加入書籤，以便日後參考。